<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Plant Trees</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body>

  <!----------------- Navbar -------------->
  <header class="flex items-center justify-between px-[135px] py-4 bg-[#15803D] shadow">
    <h1 class="text-2xl font-bold text-white">Green Earth</h1>
    <nav class="hidden md:flex gap-6 font-medium text-white">
      <a href="#">About</a>
      <a href="#">Gallery</a>
      <a href="#">Plant a Tree</a>
    </nav>
    <button class="flex items-center justify-center px-6 h-[40px] bg-[#FACC15] text-[#15803D] font-medium rounded-full">
      Plant a Tree
    </button>
  </header>

  <!----------------- Banner ---------------->
  <section class="relative bg-[#CFF0DC] px-[135px] py-12 flex items-center justify-center overflow-hidden">

    <img src="assets/hero-leaf1.png" class="absolute left-0 bottom-0 h-full w-auto object-contain" alt="">

    <!------------ Banner content ---------------->
    <div class="text-center max-w-2xl z-10">
      <h2 class="text-2xl md:text-4xl font-bold text-[#1F2937]">
        Plant a Tree, Grow a Future
      </h2>
      <p class="mt-4 text-sm text-[#1F2937]">
        Join our mission to plant 1 million trees and make the Earth greener for future</br>
        generations.
      </p>
      <button class="mt-6 px-6 py-3 bg-[#FACC15] text-[#15803D] font-semibold rounded-full shadow hover:bg-yellow-400">
        Get Involved
      </button>
    </div>

    <img src="assets/hero-leaf2.png" class="absolute right-0 bottom-0 h-full w-auto object-contain" alt="">
  </section>


 <!----------------- Choose Your Trees Section ---------------->
  <section class="px-[135px] py-12 bg-[#F0FAF6]">
    <h2 class="text-center text-2xl font-bold mb-10">Choose Your Trees</h2>
    <div class="grid grid-cols-12 gap-6">
      
      <!------------------- Categories ----------------------->
      <aside class="col-span-12 md:col-span-2">
        <h3 class="font-semibold mb-4">Categories</h3>
        <ul id="category-list" class="space-y-2 text-sm"></ul>
      </aside>

      <!------------------- Plant Cards ------------------>
      <main id="plant-list"
        class="col-span-12 md:col-span-7 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
      </main>

      <!------------ Your Cart----------->
      <aside class="col-span-12 md:col-span-3 bg-white shadow rounded-lg p-4">
        <h3 class="font-semibold mb-4">Your Cart</h3>
        <div id="cart-list" class="space-y-2 text-sm"></div>
        <div class="mt-4 border-t pt-2 flex justify-between font-bold">
          <span>Total:</span>
          <span id="cart-total">৳0</span>
        </div>
        <button id="clear-cart"
          class="mt-3 w-full bg-red-500 text-white py-2 rounded">Clear Cart</button>
      </aside>
    </div>
  </section>

  <!----------------- Modal ---------------->
  <div id="modal"
    class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
    <div class="bg-white p-6 rounded shadow-lg relative w-96">
      <button data-close
        class="absolute top-2 right-2 text-red-500">✖</button>
      <div id="modal-content"></div>
    </div>
  </div>



  <!----------------- About the Campaign ---------------->
  <section class="px-6 md:px-16 lg:px-[135px] py-10 md:py-16 bg-[#F0FAF6]">
    <h2 class="text-center text-xl md:text-2xl font-bold mb-6 md:mb-10">
      About the Campaign</h2>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-10 items-center">

      <div class="flex justify-center">
        <img src="assets/about.png" class="w-full max-w-[530px] h-auto object-cover rounded-lg shadow" alt="">
      </div>

      <!------------ Text Content ------------>
      <div class="text-[#1F2937] text-sm md:text-base">
        <p class="mb-4">
          Green Earth is a global tree plantation initiative dedicated to fighting climate change. Since our start,
          we’ve planted over 500,000 trees worldwide. By joining our campaign, you help restore forests, create habitats
          for wildlife, and combat global warming.
        </p>
        <ul class="list-disc pl-5 space-y-2">
          <li>Restoration of natural habitats</li>
          <li>Improvement of air quality</li>
          <li>Support for local communities</li>
        </ul>
      </div>
    </div>
  </section>

  <!----------------- Our Impact ---------------->
  <section class="px-[135px] py-16 bg-[#CFF0DC]">
    <h2 class="text-center text-2xl font-bold mb-10 text-[#1F2937]">Our Impact</h2>
    <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 text-center">

      <!--------- Card 1 ------------->
      <div class="bg-white shadow rounded-lg p-6">
        <h3 class="text-2xl font-bold text-[#15803D]">500K+</h3>
        <p class="text-[#1F2937] mt-2">Trees Planted</p>
      </div>

      <!--------------- Card 2 ----------------->
      <div class="bg-white shadow rounded-lg p-6">
        <h3 class="text-2xl font-bold text-[#15803D]">120+</h3>
        <p class="text-[#1F2937] mt-2">Communities Involved</p>
      </div>

      <!------------------ Card 3 --------------------->
      <div class="bg-white shadow rounded-lg p-6">
        <h3 class="text-2xl font-bold text-[#15803D]">30+</h3>
        <p class="text-[#1F2937] mt-2">Countries Reached</p>
      </div>
    </div>
  </section>

  

  <!----------------- Plant a Tree Today ---------------->
  <section class="px-6 md:px-16 lg:px-[135px] py-16 bg-[#166534]">
    <h2 class="text-center text-2xl font-bold text-[#FFFFFF] mb-8">
      Plant a Tree Today</h2>

    <div class="max-w-md mx-auto bg-[#15803D] p-6 rounded-lg shadow">
      <form class="space-y-4">
        <input type="text" placeholder="Your Name" class="w-full px-4 py-2 rounded focus:outline-none" />
        <input type="email" placeholder="Your Email Address" class="w-full px-4 py-2 rounded focus:outline-none" />
        <select class="w-full px-4 py-2 rounded focus:outline-none">
          <option class="text-[#1F2937]">Number of Trees</option>
          <option>1 Tree - $5</option>
          <option>5 Trees - $25</option>
          <option>10 Trees - $25 </option>

        </select>
        <button type="submit" class="w-full bg-[#FACC15] text-[#15803D] font-semibold py-2 rounded-full">Donate Now
        </button>
      </form>
    </div>
  </section>


  <!----------------- Footer ---------------->
  <footer class="bg-[#14532D] py-6">
    <div class="text-center text-[#FFFFFF] text-sm">
      © 2025 Green Earth. All Rights Reserved.
    </div>
  </footer>

  <!----------------- Script ---------------->
  <script>
    const els = {
      categoryList: document.getElementById('category-list'),
      plantList: document.getElementById('plant-list'),
      cartList: document.getElementById('cart-list'),
      cartTotal: document.getElementById('cart-total'),
      clearCart: document.getElementById('clear-cart'),
      modal: document.getElementById('modal'),
      modalContent: document.getElementById('modal-content'),
    };

    const state = { cart: [] };

    function fmt(num) { return "৳" + Number(num).toFixed(0); }
    function show(el, visible = true) {
      visible ? el.classList.remove('hidden') : el.classList.add('hidden');
    }

    // ------------------- Cart -------------------
    function renderCart() {
      els.cartList.innerHTML = '';
      let total = 0;
      state.cart.forEach((it, idx) => {
        total += Number(it.price || 0);
        const row = document.createElement('div');
        row.className = 'flex justify-between items-center';
        row.innerHTML = `
          <span>${it.name}</span>
          <span>${fmt(it.price)} <button class="text-red-500 ml-2">✖</button></span>
        `;
        row.querySelector('button').addEventListener('click', () => {
          state.cart.splice(idx, 1);
          renderCart();
        });
        els.cartList.appendChild(row);
      });
      els.cartTotal.textContent = fmt(total);
    }
    function addToCart(item) {
      state.cart.push(item);
      renderCart();
    }
    els.clearCart.addEventListener('click', () => { state.cart = []; renderCart(); });

    // ------------------- Modal -------------------
    function openModal(content) {
      els.modalContent.innerHTML = content;
      show(els.modal, true);
    }
    function closeModal() { show(els.modal, false); }
    els.modal.addEventListener('click', e => {
      if (e.target.matches('[data-close]')) closeModal();
    });
    window.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });

    function highlightActive(btn) {
      document.querySelectorAll('#category-list button').forEach(b => {
        b.classList.remove('bg-[#15803D]', 'text-white');
      });
      btn.classList.add('bg-[#15803D]', 'text-white');
    }

   // ---------- Load Categories ----------
    async function loadCategories() {
     
      const res = await fetch('https://openapi.programming-hero.com/api/plant/categories');
      const data = await res.json();
      els.categoryList.innerHTML = '';

      // All Trees button
      const liAll = document.createElement('li');
      liAll.innerHTML = `
        <button class="w-full text-left px-3 py-2 rounded">All Trees</button>
      `;
      const allBtn = liAll.querySelector('button');
      allBtn.addEventListener('click', () => {
        highlightActive(allBtn);      
        loadPlantsByCategory('all');
      });
      els.categoryList.appendChild(liAll);

      // ------------Dynamic categories ---------
    
      (data.data || data.categories || []).forEach(cat => {
        const id = cat.id || cat.category_id;
        const label = cat.category || cat.name || `Category ${id}`;
        const li = document.createElement('li');
        li.innerHTML = `<button class="w-full text-left px-3 py-2 rounded hover:bg-green-100">${label}</button>`;
        const btn = li.querySelector('button');
        btn.addEventListener('click', () => {
          highlightActive(btn);
          loadPlantsByCategory(id);
        });
        els.categoryList.appendChild(li);
      });
    }

    // ---------- Load Plants ----------

    async function loadPlantsByCategory(catId = 'all') {
      els.plantList.innerHTML = `
        <div class="col-span-3 text-center py-6">
          <span class="animate-spin h-6 w-6 border-4 border-green-500 border-t-transparent rounded-full inline-block"></span>
        </div>
      `;

      const url = (catId === 'all')
        ? 'https://openapi.programming-hero.com/api/plants'
        : `https://openapi.programming-hero.com/api/category/${catId}`;

      const res = await fetch(url);
      const data = await res.json();
      const plants = data.data || data.plants || [];

      els.plantList.innerHTML = '';

      if (!plants.length) {
        els.plantList.innerHTML = `
          <div class="col-span-3 text-center text-gray-600 py-8">No plants found.</div>
        `;
        return;
      }

    plants.forEach(p => {
  const safeImg = p.image || 'https://via.placeholder.com/400x300?text=Plant';
  const card = document.createElement('div');
  card.className = 'bg-white shadow rounded-lg p-4 flex flex-col';

  card.innerHTML = `
    <img src="${safeImg}" class="h-32 w-full object-cover rounded" alt="${p.name || 'Plant'}">
    <h3 class="mt-4 font-semibold text-[#1F2937]">${p.name || 'Unnamed Plant'}</h3> <!-- Changed text color to match old code -->
    <p class="font-inter font-normal text-[12px] text-[#1F2937] line-clamp-2">${p.description || 'No description'}</p> <!-- Match old font size and color -->
    <div class="flex items-center justify-between mt-3">
      <span class="inline-block px-3 py-1 text-xs bg-[#DCFCE7] text-[#15803D] rounded-[400px]">${p.category || ''}</span> <!-- Old style -->
      <p class="font-bold">৳${Number(p.price) || 500}</p> <!-- Old price format -->
    </div>
    <button class="w-full mt-3 px-4 py-2 bg-[#15803D] text-white rounded-full">Add to Cart</button> <!-- Old button style -->
  `;

  // ---------Add to cart------------
  card.querySelector('button').addEventListener('click', () => addToCart({
    ...p,
    price: Number(p.price) || 500 
  }));
        // ------Detail modal-------------
        card.querySelector('h3').addEventListener('click', () => {
       
          const pid = p.id || p.plant_id;
          if (pid) loadPlantDetail(pid);
        });

        els.plantList.appendChild(card);
      });
    }

    // ---------- Plant Detail ----------
    async function loadPlantDetail(id) {
      const res = await fetch(`https://openapi.programming-hero.com/api/plant/${id}`);
      const data = await res.json();
      const p = data.data || data.plant || {};

      const html = `
        <h2 class="font-bold text-lg mb-2">${p.name || 'Plant Detail'}</h2>
        <img src="${p.image || 'https://via.placeholder.com/400x300?text=Plant'}" class="w-full h-40 object-cover rounded mb-2" alt="${p.name || 'Plant'}">
        <p class="text-sm">${p.description || 'No description available.'}</p>
        <p class="mt-2 font-bold">${fmt(p.price)}</p>
      `;
      openModal(html);
    }

    //-------------- Init -------------//
    
    (async function init() {
      await loadCategories();
      const firstBtn = document.querySelector('#category-list button');
      if (firstBtn) highlightActive(firstBtn);
      await loadPlantsByCategory('all');
    })();
  </script>
</body>
</html>